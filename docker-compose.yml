services:
  app:
    build: .
    container_name: per-project-app 
    restart: always
    env_file:
      - ./.env 
    volumes:
      - .:/app
      - /app/node_modules
    working_dir: /app
    command: ["node", "src/server.js"] 
    # ✅ เพิ่ม: เปิด Port 1040 สู่ Host โดยตรง
    ports:
      - "1040:1040" 
    networks:
      - per_network

  # ❌ ลบบริการ NGINX เก่าออกไป (เพราะ NPM ทำหน้าที่แทน)
  # nginx:
  #   ...
  
networks:
  per_network:
    driver: bridge